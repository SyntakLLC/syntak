@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
    font-family: "MarvinVisions";
    src: url("../fonts/MarvinVisions/Web/Big/Bold/MarvinVisionsBig-Bold.woff");
}

/* Custom Utilities - Tailwind v3 Compatible */
@layer utilities {
    .screen-line-before {
        position: relative;
    }
    .screen-line-before::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100vw;
        z-index: -1;
        height: 1px;
        width: 200vw;
        background-color: var(--edge);
    }

    .screen-line-after {
        position: relative;
    }
    .screen-line-after::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: -100vw;
        z-index: -1;
        height: 1px;
        width: 200vw;
        background-color: var(--edge);
    }

    /* Responsive variants for sm: screens and up */
    @media (min-width: 640px) {
        .sm\:screen-line-before {
            position: relative;
        }
        .sm\:screen-line-before::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100vw;
            z-index: -1;
            height: 1px;
            width: 200vw;
            background-color: var(--edge);
        }

        .sm\:screen-line-after {
            position: relative;
        }
        .sm\:screen-line-after::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: -100vw;
            z-index: -1;
            height: 1px;
            width: 200vw;
            background-color: var(--edge);
        }
    }

    /* Responsive variants for max-sm: screens */
    @media (max-width: 639px) {
        .max-sm\:screen-line-before {
            position: relative;
        }
        .max-sm\:screen-line-before::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100vw;
            z-index: -1;
            height: 1px;
            width: 200vw;
            background-color: var(--edge);
        }

        .max-sm\:screen-line-after {
            position: relative;
        }
        .max-sm\:screen-line-after::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: -100vw;
            z-index: -1;
            height: 1px;
            width: 200vw;
            background-color: var(--edge);
        }
    }

    .bg-size-\[10px_10px\] {
        background-size: 10px 10px;
    }

    .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .-z-1 {
        z-index: -1;
    }

    .rotate-270 {
        transform: rotate(270deg);
    }
}

/* CSS Variables for Colors */
:root {
    /* Light Mode Colors */
    --background: oklch(1 0 0); /* white */
    --foreground: oklch(0.141 0.005 285.823); /* zinc-950 */
    
    --primary: oklch(0.141 0.005 285.823); /* zinc-950 */
    --primary-foreground: oklch(0.985 0 0); /* zinc-50 */
    
    --secondary: oklch(0.967 0.001 286.375); /* zinc-100 */
    --secondary-foreground: oklch(0.141 0.005 285.823); /* zinc-950 */
    
    --muted: oklch(0.967 0.001 286.375); /* zinc-100 */
    --muted-foreground: oklch(0.552 0.016 285.938); /* zinc-500 */
    
    --card: oklch(1 0 0); /* white */
    --card-foreground: oklch(0.141 0.005 285.823); /* zinc-950 */
    
    --popover: oklch(1 0 0); /* white */
    --popover-foreground: oklch(0.141 0.005 285.823); /* zinc-950 */
    --popover-border: color-mix(in oklab, oklch(0 0 0) 15%, transparent);
    
    --accent: oklch(0.967 0.001 286.375); /* zinc-100 */
    --accent2: color-mix(in oklab, var(--accent) 50%, transparent);
    --accent-foreground: oklch(0.21 0.006 285.885); /* zinc-900 */
    
    --border: oklch(0.92 0.004 286.32); /* zinc-200 */
    --edge: color-mix(in oklab, var(--border) 64%, var(--background));
    
    --input: oklch(0.92 0.004 286.32); /* zinc-200 */
    --ring: oklch(0.705 0.015 286.067); /* zinc-400 */
    
    --info: oklch(0.67 0.17 244.98);
    --success: oklch(0.723 0.219 149.579); /* green-500 */
    --destructive: oklch(0.577 0.245 27.325); /* red-600 */
    --link: oklch(0.488 0.243 264.376); /* blue-700 */
    
    --code: oklch(0.985 0 0); /* zinc-50 */
    --code-foreground: oklch(0.141 0.005 285.823); /* zinc-950 */
    --code-number: oklch(0.705 0.015 286.067); /* zinc-400 */
    --code-highlight: oklch(0.967 0.001 286.375); /* zinc-100 */
    
    --selection: oklch(0.141 0.005 285.823); /* zinc-950 */
    --selection-foreground: oklch(0.985 0 0); /* zinc-50 */
    
    --shadow-popover: 0 6px 24px rgba(0, 0, 0, 0.25);
    
    /* Pattern colors for gradients */
    --color-edge: var(--edge);
    --color-zinc-950: oklch(0.141 0.005 285.823);
    --color-zinc-50: oklch(0.985 0 0);
    --color-white: oklch(1 0 0);
    --color-black: oklch(0 0 0);
}

.dark {
    /* Dark Mode Colors */
    --background: oklch(0.141 0.005 285.823); /* zinc-950 */
    --foreground: oklch(0.985 0 0); /* zinc-50 */
    
    --primary: oklch(0.37 0.013 285.805); /* zinc-700 */
    --primary-foreground: oklch(0.985 0 0); /* zinc-50 */
    
    --secondary: oklch(0.274 0.006 286.033); /* zinc-800 */
    --secondary-foreground: oklch(0.985 0 0); /* zinc-50 */
    
    --muted: oklch(0.274 0.006 286.033); /* zinc-800 */
    --muted-foreground: oklch(0.705 0.015 286.067); /* zinc-400 */
    
    --card: oklch(0.21 0.006 285.885); /* zinc-900 */
    --card-foreground: oklch(0.985 0 0); /* zinc-50 */
    
    --popover: oklch(0.21 0.006 285.885); /* zinc-900 */
    --popover-foreground: oklch(0.985 0 0); /* zinc-50 */
    --popover-border: oklch(0.37 0.013 285.805); /* zinc-700 */
    
    --accent: oklch(0.274 0.006 286.033); /* zinc-800 */
    --accent2: color-mix(in oklab, var(--accent) 20%, transparent);
    --accent-foreground: oklch(0.985 0 0); /* zinc-50 */
    
    --border: oklch(0.274 0.006 286.033); /* zinc-800 */
    --edge: color-mix(in oklab, var(--border) 64%, var(--background));
    
    --input: oklch(0.274 0.006 286.033); /* zinc-800 */
    --ring: oklch(0.552 0.016 285.938); /* zinc-500 */
    
    --success: oklch(0.723 0.219 149.579); /* green-500 */
    --destructive: oklch(0.505 0.213 27.518); /* red-700 */
    --link: oklch(0.623 0.214 259.815); /* blue-500 */
    
    --code: oklch(0.21 0.006 285.885); /* zinc-900 */
    --code-foreground: oklch(0.985 0 0); /* zinc-50 */
    --code-number: oklch(0.552 0.016 285.938); /* zinc-500 */
    --code-highlight: oklch(0.274 0.006 286.033); /* zinc-800 */
    
    --selection: oklch(0.985 0 0); /* zinc-50 */
    --selection-foreground: oklch(0.141 0.005 285.823); /* zinc-950 */
    
    --shadow-popover: 0 0 24px rgba(0, 0, 0, 0.5);
}

/* Base Styles */
@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--border);
        outline-color: color-mix(in oklab, var(--ring) 50%, transparent);
    }

    ::selection {
        background-color: var(--selection);
        color: var(--selection-foreground);
    }

    html {
        scroll-behavior: smooth;
    }

    @media (prefers-reduced-motion: reduce) {
        html {
            scroll-behavior: auto;
        }
    }

    body {
        @apply font-sans antialiased bg-background text-foreground;
        font-synthesis-weight: none;
        text-rendering: optimizeLegibility;
    }

    /* Custom scrollbar styling */
    ::-webkit-scrollbar {
        width: 5px;
    }
    ::-webkit-scrollbar-track {
        background: transparent;
    }
    ::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 5px;
    }
    * {
        scrollbar-width: thin;
        scrollbar-color: var(--border) transparent;
    }

    [id] {
        scroll-margin-top: 5.5rem;
    }
}

/* Component Styles */
@layer components {
    .bg-gradient {
        background: radial-gradient(#f2fbff, #7dd3fb, #6d61ed);
    }

    /* Code block styling */
    [data-rehype-pretty-code-figure] {
        @apply relative my-6 rounded-lg bg-code text-code-foreground;
    }

    [data-rehype-pretty-code-figure] pre {
        @apply overflow-x-auto overscroll-x-contain px-4 py-4;
    }

    [data-rehype-pretty-code-figure] code {
        @apply font-mono text-sm;
    }

    [data-line] {
        @apply py-0.5;
    }

    [data-rehype-pretty-code-title] {
        @apply flex gap-3 items-center px-4 py-2.5 text-sm border-b text-muted-foreground;
    }

    [data-line-numbers] {
        counter-reset: line;
    }

    [data-line-numbers] > [data-line]::before {
        counter-increment: line;
        content: counter(line);
        @apply inline-block sticky left-0 pr-6 w-16 text-sm text-right bg-code text-code-number;
    }

    [data-line-numbers] [data-highlighted-line][data-line]::before {
        @apply bg-code-highlight;
    }

    [data-highlighted-line] {
        @apply bg-code-highlight;
    }
}
